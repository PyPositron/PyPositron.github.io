<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyPositron Docs - Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-in': 'slideIn 0.3s ease-out'
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateX(-20px);
            }
            to { 
                opacity: 1;
                transform: translateX(0);
            }
        }

        .sidebar {
            transition: transform 0.3s ease-in-out;
        }
        
        .sidebar.mobile-hidden {
            transform: translateX(-100%);
        }

        .mobile-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 40;
        }
        
        .mobile-overlay.active {
            display: block;
        }

        .hero-gradient {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Documentation Content Styles */
        .docs-content {
            line-height: 1.7;
            color: #374151;
        }

        .docs-content h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            margin-top: 3rem;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .docs-content h1:first-child {
            margin-top: 0;
        }

        .docs-content h2 {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            margin-top: 2.5rem;
            color: #1f2937;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }

        .docs-content h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            margin-top: 2rem;
            color: #374151;
        }

        .docs-content h4 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            margin-top: 1.5rem;
            color: #4b5563;
        }

        .docs-content p {
            margin-bottom: 1rem;
            color: #6b7280;
            font-size: 1rem;
        }

        .docs-content ul, .docs-content ol {
            margin-bottom: 1rem;
            padding-left: 1.5rem;
        }

        .docs-content ul {
            list-style-type: disc;
        }

        .docs-content ol {
            list-style-type: decimal;
        }

        .docs-content li {
            margin-bottom: 0.5rem;
            color: #6b7280;
        }

        .docs-content a {
            color: #3b82f6;
            text-decoration: underline;
            font-weight: 500;
        }

        .docs-content a:hover {
            color: #1d4ed8;
        }

        .docs-content blockquote {
            border-left: 4px solid #3b82f6;
            padding-left: 1rem;
            margin: 1.5rem 0;
            background-color: #f8fafc;
            padding: 1rem;
            border-radius: 0.375rem;
        }

        .docs-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: white;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        }

        .docs-content th, .docs-content td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .docs-content th {
            background-color: #f9fafb;
            font-weight: 600;
            color: #374151;
        }

        /* Inline code styling */
        .docs-content code:not([class*="language-"]) {
            background-color: #1f2937 !important;
            color: #f9fafb !important;
            padding: 0.25rem 0.5rem !important;
            border-radius: 0.375rem !important;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace !important;
            font-size: 0.875rem !important;
            font-weight: 500;
        }

        /* Code block container */
        .code-block-container {
            position: relative;
            margin: 1.5rem 0;
        }

        /* Override Prism.js styles */
        .docs-content pre[class*="language-"] {
            background: #1f2937 !important;
            border-radius: 0.5rem !important;
            padding: 1.5rem !important;
            margin: 1.5rem 0 !important;
            overflow-x: auto;
            position: relative;
        }

        .docs-content code[class*="language-"] {
            background: transparent !important;
            color: #f9fafb !important;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace !important;
            font-size: 0.875rem !important;
            line-height: 1.5;
        }

        /* Copy button for code blocks */
        .copy-button {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: rgba(55, 65, 81, 0.8);
            border: 1px solid rgba(75, 85, 99, 0.5);
            color: #d1d5db;
            padding: 0.5rem;
            border-radius: 0.375rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2rem;
            height: 2rem;
            z-index: 10;
        }

        .copy-button:hover {
            background: rgba(75, 85, 99, 0.8);
            color: #f9fafb;
        }

        .copy-button.copied {
            background: rgba(34, 197, 94, 0.8);
            color: white;
        }

        /* Sidebar styles */
        .sidebar-link {
            display: block;
            padding: 0.5rem 1rem;
            color: #6b7280;
            text-decoration: none;
            border-radius: 0.375rem;
            transition: all 0.2s ease;
            font-size: 0.875rem;
        }

        .sidebar-link:hover {
            background-color: #f3f4f6;
            color: #374151;
        }

        .sidebar-link.active {
            background-color: #dbeafe;
            color: #1d4ed8;
            font-weight: 500;
        }

        .sidebar-section {
            margin-bottom: 1.5rem;
        }

        .sidebar-section-title {
            font-weight: 600;
            color: #374151;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
            padding: 0 1rem;
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                height: 100vh;
                z-index: 50;
                background: white;
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            }
        }

        /* Alert boxes */
        .alert {
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1.5rem 0;
            display: flex;
            align-items: flex-start;
        }

        .alert-info {
            background-color: #eff6ff;
            border: 1px solid #bfdbfe;
            color: #1e40af;
        }

        .alert-success {
            background-color: #f0fdf4;
            border: 1px solid #bbf7d0;
            color: #166534;
        }

        .alert-warning {
            background-color: #fffbeb;
            border: 1px solid #fed7aa;
            color: #92400e;
        }

        .alert-error {
            background-color: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
        }
    </style>
    
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M8FQBM4RL7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M8FQBM4RL7');
</script>
<body class="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50">
    <!-- Mobile Overlay -->
    <div id="mobile-overlay" class="mobile-overlay" onclick="toggleSidebar()"></div>

    <!-- Header -->
    <header class="border-b bg-white/80 backdrop-blur-sm sticky top-0 z-30">
        <div class="container mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                    </svg>
                </div>
                <span class="text-xl font-bold">PyPositron Docs</span>
            </div>
            <nav class="hidden md:flex items-center space-x-6">
                <a href="/" class="text-sm font-medium hover:text-blue-600 transition-colors">Home</a>
                <a href="/Home" class="text-sm font-medium text-blue-600">Docs</a>
                <a href="https://github.com/itzmetanjim/py-positron" class="inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    GitHub
                </a>
            </nav>
        </div>
    </header>

    <div class="flex">
        <!-- Sidebar -->
         <aside id="sidebar" class="sidebar w-64 bg-white border-r border-gray-200 h-screen sticky top-16 overflow-y-auto">
            <div class="p-6">
                <div class="sidebar-section">
                    <div class="sidebar-section-title">Documentation</div>
                    <nav class="space-y-1">
                        <!--<a href="ORIGINALNAME.html" class="sidebar-link active">FORMATTEDNAME</a>-->
                        <a href="/Browser-Objects" class="sidebar-link">Browser Objects</a>
<a href="/CLI-Commands" class="sidebar-link">Cli Commands</a>
<a href="/Document" class="sidebar-link">Document</a>
<a href="/Element" class="sidebar-link">Element</a>
<a href="/ElementList" class="sidebar-link">Elementlist</a>
<a href="/Getting-Started" class="sidebar-link">Getting Started</a>
<a href="/Global-Functions" class="sidebar-link">Global Functions</a>
<a href="/Home" class="sidebar-link">Home</a>
<a href="/HTMLWindow" class="sidebar-link">Htmlwindow</a>
<a href="/Installation" class="sidebar-link">Installation</a>
<a href="/Internal-Classes" class="sidebar-link">Internal Classes</a>
<a href="/Library-Reference" class="sidebar-link">Library Reference</a>
<a href="/PositronWindowWrapper" class="sidebar-link">Positronwindowwrapper</a>
<a href="/Python-HTML-Integration" class="sidebar-link">Python Html Integration</a>
<a href="/Quick-Start" class="sidebar-link">Quick Start</a>
<a href="/Style" class="sidebar-link">Style</a>
<a href="/Troubleshooting" class="sidebar-link">Troubleshooting</a>
<a href="/Virtual-Environments" class="sidebar-link">Virtual Environments</a>
                    </nav>
                </div>

            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-6 md:p-8 max-w-4xl">
            <div class="docs-content">
                <!-- 
                ============================================
                INSERT CONVERTED UNSTYLED DOCS HTML HERE
                ============================================
                
                This is where you should place the automatically converted
                HTML content from your documentation source (Markdown, etc.).
                All styling is handled by CSS classes above, so no inline
                styles are needed.
                
                Example of what the converted HTML should look like:
                -->
                
                <h1>Internal Classes</h1>
<p>PyPositron includes several internal classes that manage the execution context, exposed functions, and communication between Python and JavaScript. While these classes are primarily used internally, understanding them can help with advanced usage scenarios and debugging.</p>
<h2>PositronContext</h2>
<p>The PositronContext class manages the execution context for Python code and event handlers. It serves as the bridge between Python and JavaScript environments, handling variable scoping, code execution, and event management.</p>
<h3>Attributes</h3>
<ul>
<li><code>window</code>: The webview window object reference</li>
<li><code>globals: dict</code>: Global variables for Python execution context, accessible in <code>&lt;py&gt;</code> tags and dynamic code execution</li>
<li><code>locals: dict</code>: Local variables for Python execution context</li>
<li><code>exposed_functions: dict</code>: Dictionary of functions exposed to JavaScript, mapping function names to callable objects</li>
<li><code>event_handlers: dict</code>: Dictionary of registered event handlers, mapping event names to callback functions</li>
</ul>
<h3>Methods</h3>
<ul>
<li><code>execute(code: str) -&gt; Tuple[bool, str]</code>: Executes Python code within the context. Returns a tuple containing success status (boolean) and error message (string if failed, empty if successful)</li>
<li><code>register_event_handler(element_id: str, event_type: str, callback: Callable) -&gt; str</code>: Registers an event handler for a DOM element. Returns a unique identifier for the handler</li>
</ul>
<h3>Usage Examples</h3>
<h4>Basic Context Usage</h4>
<pre><code class="language-python">import py_positron

def main(ui):
    # Access the context
    context = ui.context
    
    # Set global variables accessible in &lt;py&gt; tags
    context.globals['app_config'] = {
        'name': 'MyApp',
        'version': '1.0.0',
        'debug': True
    }
    
    context.globals['user_preferences'] = {
        'theme': 'dark',
        'language': 'en'
    }
    
    # Execute Python code dynamically
    code = &quot;&quot;&quot;
app_title = f&quot;{app_config['name']} v{app_config['version']}&quot;
document.getElementById('title').innerText = app_title
&quot;&quot;&quot;
    
    success, error = context.execute(code)
    if success:
        print(&quot;Code executed successfully&quot;)
    else:
        print(f&quot;Execution error: {error}&quot;)

py_positron.openUI(&quot;app.html&quot;, main=main)
</code></pre>
<h4>Advanced Context Management</h4>
<pre><code class="language-python">import py_positron
import json
import datetime

def main(ui):
    context = ui.context
    
    # Set up a comprehensive context
    setup_context_variables(context)
    setup_custom_handlers(context, ui)
    demonstrate_dynamic_execution(context, ui)

def setup_context_variables(context):
    &quot;&quot;&quot;Set up global variables for the context&quot;&quot;&quot;
    
    # Application metadata
    context.globals['app_info'] = {
        'name': 'PyPositron Context Demo',
        'version': '2.1.0',
        'author': 'PyPositron Team',
        'build_date': datetime.datetime.now().isoformat()
    }
    
    # Utility functions available in &lt;py&gt; tags
    context.globals['utils'] = {
        'format_date': lambda d: datetime.datetime.fromtimestamp(d).strftime('%Y-%m-%d %H:%M:%S'),
        'to_json': lambda obj: json.dumps(obj, indent=2),
        'from_json': lambda s: json.loads(s)
    }
    
    # Application state
    context.globals['app_state'] = {
        'current_page': 'home',
        'user_logged_in': False,
        'notifications': []
    }

def setup_custom_handlers(context, ui):
    &quot;&quot;&quot;Register custom event handlers&quot;&quot;&quot;
    
    def handle_page_change(page_name):
        context.globals['app_state']['current_page'] = page_name
        ui.htmlwindow.console.log(f&quot;Page changed to: {page_name}&quot;)
        
        # Update UI based on page change
        code = f&quot;&quot;&quot;
document.querySelectorAll('.page').forEach(page =&gt; page.style.display = 'none')
current_page = document.getElementById('{page_name}')
if current_page:
    current_page.style.display = 'block'
&quot;&quot;&quot;
        context.execute(code)
    
    def handle_notification_add(message, type='info'):
        notification = {
            'id': len(context.globals['app_state']['notifications']),
            'message': message,
            'type': type,
            'timestamp': datetime.datetime.now().timestamp()
        }
        context.globals['app_state']['notifications'].append(notification)
        
        # Update notification UI
        code = f&quot;&quot;&quot;
notifications_container = document.getElementById('notifications')
if notifications_container:
    notification_div = document.createElement('div')
    notification_div.className = 'notification notification-{type}'
    notification_div.innerHTML = '''
        &lt;span class=&quot;message&quot;&gt;{message}&lt;/span&gt;
        &lt;span class=&quot;time&quot;&gt;{datetime.datetime.now().strftime('%H:%M:%S')}&lt;/span&gt;
    '''
    notifications_container.appendChild(notification_div)
&quot;&quot;&quot;
        context.execute(code)
    
    # Register handlers
    context.event_handlers['page_change'] = handle_page_change
    context.event_handlers['notification_add'] = handle_notification_add

def demonstrate_dynamic_execution(context, ui):
    &quot;&quot;&quot;Demonstrate dynamic code execution capabilities&quot;&quot;&quot;
    
    # Set up code execution interface
    execute_btn = ui.document.getElementById(&quot;executeCodeBtn&quot;)
    code_input = ui.document.getElementById(&quot;codeInput&quot;)
    output_div = ui.document.getElementById(&quot;codeOutput&quot;)
    
    if execute_btn and code_input and output_div:
        def execute_user_code():
            user_code = code_input.value.strip()
            if not user_code:
                return
            
            # Add output capture to user code
            enhanced_code = f&quot;&quot;&quot;
import sys
from io import StringIO

# Capture output
old_stdout = sys.stdout
sys.stdout = captured_output = StringIO()

try:
    # User code
{user_code}
    
    # Get captured output
    output = captured_output.getvalue()
    if output:
        print(&quot;Output:&quot;, output)
        
finally:
    # Restore stdout
    sys.stdout = old_stdout
&quot;&quot;&quot;
            
            success, error = context.execute(enhanced_code)
            
            if success:
                output_div.style.color = &quot;green&quot;
                output_div.innerText = &quot;Code executed successfully!&quot;
                ui.htmlwindow.console.log(&quot;User code executed successfully&quot;)
            else:
                output_div.style.color = &quot;red&quot;
                output_div.innerText = f&quot;Error: {error}&quot;
                ui.htmlwindow.console.error(f&quot;User code error: {error}&quot;)
        
        execute_btn.addEventListener(&quot;click&quot;, execute_user_code)

py_positron.openUI(&quot;context_advanced.html&quot;, main=main)
</code></pre>
<h4>Context State Management</h4>
<pre><code class="language-python">import py_positron

class ApplicationState:
    &quot;&quot;&quot;A more sophisticated state management approach&quot;&quot;&quot;
    
    def __init__(self, context):
        self.context = context
        self._state = {}
        self._listeners = {}
        
        # Make state management functions available globally
        context.globals['get_state'] = self.get
        context.globals['set_state'] = self.set
        context.globals['on_state_change'] = self.on_change
    
    def get(self, key, default=None):
        return self._state.get(key, default)
    
    def set(self, key, value):
        old_value = self._state.get(key)
        self._state[key] = value
        
        # Notify listeners
        if key in self._listeners:
            for listener in self._listeners[key]:
                listener(value, old_value)
    
    def on_change(self, key, callback):
        if key not in self._listeners:
            self._listeners[key] = []
        self._listeners[key].append(callback)

def main(ui):
    # Set up sophisticated state management
    app_state = ApplicationState(ui.context)
    
    # Initialize state
    app_state.set('user', {'name': 'Guest', 'role': 'visitor'})
    app_state.set('theme', 'light')
    app_state.set('sidebar_open', False)
    
    # Set up state change listeners
    def on_theme_change(new_theme, old_theme):
        ui.htmlwindow.console.log(f&quot;Theme changed from {old_theme} to {new_theme}&quot;)
        
        # Update CSS based on theme
        body = ui.document.body
        if new_theme == 'dark':
            body.classList.add('dark-theme')
            body.classList.remove('light-theme')
        else:
            body.classList.add('light-theme')
            body.classList.remove('dark-theme')
    
    def on_user_change(new_user, old_user):
        ui.htmlwindow.console.log(f&quot;User changed: {new_user}&quot;)
        
        # Update user display
        user_display = ui.document.getElementById('userDisplay')
        if user_display:
            user_display.innerText = f&quot;Welcome, {new_user['name']}!&quot;
    
    app_state.on_change('theme', on_theme_change)
    app_state.on_change('user', on_user_change)
    
    # Set up UI controls that use state management
    theme_toggle = ui.document.getElementById('themeToggle')
    if theme_toggle:
        def toggle_theme():
            current_theme = app_state.get('theme')
            new_theme = 'dark' if current_theme == 'light' else 'light'
            app_state.set('theme', new_theme)
        
        theme_toggle.addEventListener('click', toggle_theme)

py_positron.openUI(&quot;state_management.html&quot;, main=main)
</code></pre>
<h2>ExposedFunctions</h2>
<p>The ExposedFunctions class represents Python functions that have been exposed to JavaScript. It provides a clean interface for calling Python functions from JavaScript code and <code>&lt;py&gt;</code> tags.</p>
<h3>Methods</h3>
<ul>
<li><code>__init__(functions_dict: Dict[str, Callable])</code>: Initializes with a dictionary of function names mapped to callable objects</li>
</ul>
<h3>Usage</h3>
<p>Functions passed to the <code>functions</code> parameter of <code>openUI()</code> become available through this object:</p>
<h4>Basic Function Exposure</h4>
<pre><code class="language-python">import py_positron
import math
import random

# Define functions to expose
def calculate_area(radius):
    &quot;&quot;&quot;Calculate the area of a circle&quot;&quot;&quot;
    return math.pi * radius ** 2

def generate_random_number(min_val=1, max_val=100):
    &quot;&quot;&quot;Generate a random number within a range&quot;&quot;&quot;
    return random.randint(min_val, max_val)

def process_data(data_list):
    &quot;&quot;&quot;Process a list of numbers&quot;&quot;&quot;
    if not data_list:
        return {'error': 'No data provided'}
    
    return {
        'sum': sum(data_list),
        'average': sum(data_list) / len(data_list),
        'min': min(data_list),
        'max': max(data_list),
        'count': len(data_list)
    }

def main(ui):
    # Functions are now available via ui.exposed
    
    # Example: Calculate area button
    calc_btn = ui.document.getElementById(&quot;calculateBtn&quot;)
    radius_input = ui.document.getElementById(&quot;radiusInput&quot;)
    result_div = ui.document.getElementById(&quot;result&quot;)
    
    if calc_btn and radius_input and result_div:
        def calculate():
            try:
                radius = float(radius_input.value)
                area = ui.exposed.calculate_area(radius)
                result_div.innerText = f&quot;Area: {area:.2f}&quot;
                result_div.style.color = &quot;green&quot;
            except ValueError:
                result_div.innerText = &quot;Please enter a valid number&quot;
                result_div.style.color = &quot;red&quot;
        
        calc_btn.addEventListener(&quot;click&quot;, calculate)
    
    # Example: Random number generator
    random_btn = ui.document.getElementById(&quot;randomBtn&quot;)
    random_display = ui.document.getElementById(&quot;randomDisplay&quot;)
    
    if random_btn and random_display:
        def generate_random():
            number = ui.exposed.generate_random_number(1, 1000)
            random_display.innerText = f&quot;Random number: {number}&quot;
        
        random_btn.addEventListener(&quot;click&quot;, generate_random)

# Launch with exposed functions
py_positron.openUI(
    &quot;calculator.html&quot;, 
    main=main, 
    functions=[calculate_area, generate_random_number, process_data]
)
</code></pre>
<h4>Advanced Function Exposure with Error Handling</h4>
<pre><code class="language-python">import py_positron
import json
import sqlite3
import os

class DatabaseManager:
    &quot;&quot;&quot;A more complex class with methods to expose&quot;&quot;&quot;
    
    def __init__(self, db_path=&quot;app.db&quot;):
        self.db_path = db_path
        self.init_database()
    
    def init_database(self):
        &quot;&quot;&quot;Initialize the database with required tables&quot;&quot;&quot;
        with sqlite3.connect(self.db_path) as conn:
            conn.execute(&quot;&quot;&quot;
                CREATE TABLE IF NOT EXISTS users (
                    id INTEGER PRIMARY KEY,
                    name TEXT NOT NULL,
                    email TEXT UNIQUE NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                )
            &quot;&quot;&quot;)
    
    def add_user(self, name, email):
        &quot;&quot;&quot;Add a new user to the database&quot;&quot;&quot;
        try:
            with sqlite3.connect(self.db_path) as conn:
                conn.execute(
                    &quot;INSERT INTO users (name, email) VALUES (?, ?)&quot;,
                    (name, email)
                )
                return {&quot;success&quot;: True, &quot;message&quot;: &quot;User added successfully&quot;}
        except sqlite3.IntegrityError:
            return {&quot;success&quot;: False, &quot;message&quot;: &quot;Email already exists&quot;}
        except Exception as e:
            return {&quot;success&quot;: False, &quot;message&quot;: str(e)}
    
    def get_users(self):
        &quot;&quot;&quot;Get all users from the database&quot;&quot;&quot;
        try:
            with sqlite3.connect(self.db_path) as conn:
                conn.row_factory = sqlite3.Row
                cursor = conn.execute(&quot;SELECT * FROM users ORDER BY created_at DESC&quot;)
                users = [dict(row) for row in cursor.fetchall()]
                return {&quot;success&quot;: True, &quot;users&quot;: users}
        except Exception as e:
            return {&quot;success&quot;: False, &quot;message&quot;: str(e)}
    
    def delete_user(self, user_id):
        &quot;&quot;&quot;Delete a user by ID&quot;&quot;&quot;
        try:
            with sqlite3.connect(self.db_path) as conn:
                cursor = conn.execute(&quot;DELETE FROM users WHERE id = ?&quot;, (user_id,))
                if cursor.rowcount &gt; 0:
                    return {&quot;success&quot;: True, &quot;message&quot;: &quot;User deleted successfully&quot;}
                else:
                    return {&quot;success&quot;: False, &quot;message&quot;: &quot;User not found&quot;}
        except Exception as e:
            return {&quot;success&quot;: False, &quot;message&quot;: str(e)}

def file_operations_save(filename, content):
    &quot;&quot;&quot;Save content to a file&quot;&quot;&quot;
    try:
        with open(filename, 'w') as f:
            f.write(content)
        return {&quot;success&quot;: True, &quot;message&quot;: f&quot;Saved to {filename}&quot;}
    except Exception as e:
        return {&quot;success&quot;: False, &quot;message&quot;: str(e)}

def file_operations_load(filename):
    &quot;&quot;&quot;Load content from a file&quot;&quot;&quot;
    try:
        if not os.path.exists(filename):
            return {&quot;success&quot;: False, &quot;message&quot;: &quot;File not found&quot;}
        
        with open(filename, 'r') as f:
            content = f.read()
        return {&quot;success&quot;: True, &quot;content&quot;: content}
    except Exception as e:
        return {&quot;success&quot;: False, &quot;message&quot;: str(e)}

def main(ui):
    # Initialize database manager
    db = DatabaseManager()
    
    # Set up user management interface
    setup_user_interface(ui, db)
    
    # Set up file operations interface
    setup_file_interface(ui)

def setup_user_interface(ui, db):
    &quot;&quot;&quot;Set up user management UI&quot;&quot;&quot;
    
    # Add user form
    add_user_btn = ui.document.getElementById(&quot;addUserBtn&quot;)
    name_input = ui.document.getElementById(&quot;nameInput&quot;)
    email_input = ui.document.getElementById(&quot;emailInput&quot;)
    
    if add_user_btn and name_input and email_input:
        def add_user():
            name = name_input.value.strip()
            email = email_input.value.strip()
            
            if not name or not email:
                ui.htmlwindow.alert(&quot;Please fill in all fields&quot;)
                return
            
            result = db.add_user(name, email)
            if result[&quot;success&quot;]:
                ui.htmlwindow.alert(result[&quot;message&quot;])
                name_input.value = &quot;&quot;
                email_input.value = &quot;&quot;
                refresh_user_list()
            else:
                ui.htmlwindow.alert(f&quot;Error: {result['message']}&quot;)
        
        add_user_btn.addEventListener(&quot;click&quot;, add_user)
    
    # Refresh user list
    def refresh_user_list():
        users_container = ui.document.getElementById(&quot;usersContainer&quot;)
        if not users_container:
            return
        
        result = db.get_users()
        if result[&quot;success&quot;]:
            users_html = &quot;&quot;
            for user in result[&quot;users&quot;]:
                users_html += f&quot;&quot;&quot;
                &lt;div class=&quot;user-item&quot; data-id=&quot;{user['id']}&quot;&gt;
                    &lt;span&gt;&lt;strong&gt;{user['name']}&lt;/strong&gt; ({user['email']})&lt;/span&gt;
                    &lt;button onclick=&quot;deleteUser({user['id']})&quot;&gt;Delete&lt;/button&gt;
                &lt;/div&gt;
                &quot;&quot;&quot;
            users_container.innerHTML = users_html
        else:
            users_container.innerHTML = f&quot;&lt;p&gt;Error loading users: {result['message']}&lt;/p&gt;&quot;
    
    # Delete user function (accessible from HTML)
    ui.context.globals['deleteUser'] = lambda user_id: delete_user_handler(ui, db, user_id)
    
    # Refresh button
    refresh_btn = ui.document.getElementById(&quot;refreshUsersBtn&quot;)
    if refresh_btn:
        refresh_btn.addEventListener(&quot;click&quot;, refresh_user_list)
    
    # Initial load
    refresh_user_list()

def delete_user_handler(ui, db, user_id):
    &quot;&quot;&quot;Handle user deletion&quot;&quot;&quot;
    if ui.htmlwindow.confirm(&quot;Are you sure you want to delete this user?&quot;):
        result = db.delete_user(user_id)
        ui.htmlwindow.alert(result[&quot;message&quot;])
        if result[&quot;success&quot;]:
            # Refresh the user list
            refresh_user_list()

def setup_file_interface(ui):
    &quot;&quot;&quot;Set up file operations UI&quot;&quot;&quot;
    
    # Save file
    save_btn = ui.document.getElementById(&quot;saveFileBtn&quot;)
    filename_input = ui.document.getElementById(&quot;filenameInput&quot;)
    content_textarea = ui.document.getElementById(&quot;contentTextarea&quot;)
    
    if save_btn and filename_input and content_textarea:
        def save_file():
            filename = filename_input.value.strip()
            content = content_textarea.value
            
            if not filename:
                ui.htmlwindow.alert(&quot;Please enter a filename&quot;)
                return
            
            result = ui.exposed.file_operations_save(filename, content)
            ui.htmlwindow.alert(result[&quot;message&quot;])
        
        save_btn.addEventListener(&quot;click&quot;, save_file)
    
    # Load file
    load_btn = ui.document.getElementById(&quot;loadFileBtn&quot;)
    
    if load_btn and filename_input and content_textarea:
        def load_file():
            filename = filename_input.value.strip()
            
            if not filename:
                ui.htmlwindow.alert(&quot;Please enter a filename&quot;)
                return
            
            result = ui.exposed.file_operations_load(filename)
            if result[&quot;success&quot;]:
                content_textarea.value = result[&quot;content&quot;]
                ui.htmlwindow.alert(&quot;File loaded successfully&quot;)
            else:
                ui.htmlwindow.alert(f&quot;Error: {result['message']}&quot;)
        
        load_btn.addEventListener(&quot;click&quot;, load_file)

# Create database instance and expose its methods
db_instance = DatabaseManager()

py_positron.openUI(
    &quot;database_app.html&quot;,
    main=main,
    title=&quot;Database Management App&quot;,
    width=1000,
    height=700,
    functions=[
        db_instance.add_user,
        db_instance.get_users, 
        db_instance.delete_user,
        file_operations_save,
        file_operations_load
    ]
)
</code></pre>
<h2>Best Practices for Internal Classes</h2>
<h3>PositronContext Best Practices</h3>
<ol>
<li><strong>Don't overuse globals</strong>: Only put truly global data in <code>context.globals</code></li>
<li><strong>Use descriptive names</strong>: Make variable names clear and unambiguous</li>
<li><strong>Handle execution errors</strong>: Always check the return value of <code>context.execute()</code></li>
<li><strong>Clean up handlers</strong>: Remove event handlers when they're no longer needed</li>
</ol>
<pre><code class="language-python">def main(ui):
    # Good: Essential configuration
    ui.context.globals['config'] = load_app_config()
    
    # Good: Utility functions for &lt;py&gt; tags
    ui.context.globals['helpers'] = {
        'format_currency': lambda x: f&quot;${x:.2f}&quot;,
        'format_date': lambda d: d.strftime('%Y-%m-%d')
    }
    
    # Avoid: Storing complex application state
    # Use proper Python variables instead
</code></pre>
<h3>ExposedFunctions Best Practices</h3>
<ol>
<li><strong>Return consistent data structures</strong>: Always return the same type of data</li>
<li><strong>Handle errors gracefully</strong>: Return error objects instead of raising exceptions</li>
<li><strong>Validate input parameters</strong>: Check and sanitize all inputs</li>
<li><strong>Keep functions focused</strong>: Each function should do one thing well</li>
</ol>
<pre><code class="language-python">def safe_exposed_function(data):
    &quot;&quot;&quot;Example of a well-designed exposed function&quot;&quot;&quot;
    try:
        # Validate input
        if not isinstance(data, (list, dict)):
            return {&quot;success&quot;: False, &quot;error&quot;: &quot;Invalid input type&quot;}
        
        # Process data
        result = process_the_data(data)
        
        # Return consistent structure
        return {&quot;success&quot;: True, &quot;data&quot;: result}
        
    except Exception as e:
        # Handle errors gracefully
        return {&quot;success&quot;: False, &quot;error&quot;: str(e)}
</code></pre>
<h2>Related Documentation</h2>
<ul>
<li><strong><a href="/PositronWindowWrapper">PositronWindowWrapper</a></strong>: The main interface that provides access to these classes</li>
<li><strong><a href="/Global-Functions">Global Functions</a></strong>: Functions that create and manage these internal classes</li>
<li><strong><a href="/Python-HTML-Integration">Python in HTML</a></strong>: How these classes enable Python-HTML integration</li>
</ul>

                
                <!-- 
                ============================================
                END OF CONVERTED DOCS INSERTION POINT
                ============================================
                -->
            </div>
        </main>
    </div>

    <script>
        // Initialize Prism.js
        Prism.manual = true;

        // Copy button functionality for all code blocks
        function addCopyButtons() {
            const codeBlocks = document.querySelectorAll('pre[class*="language-"]');
            
            codeBlocks.forEach(pre => {
                // Create container if it doesn't exist
                if (!pre.parentElement.classList.contains('code-block-container')) {
                    const container = document.createElement('div');
                    container.className = 'code-block-container';
                    pre.parentNode.insertBefore(container, pre);
                    container.appendChild(pre);
                }
                
                const container = pre.parentElement;
                const codeElement = pre.querySelector('code');
                
                const copyButton = document.createElement('button');
                copyButton.className = 'copy-button';
                copyButton.innerHTML = `
                    <svg class="copy-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                    </svg>
                `;
                
                copyButton.addEventListener('click', async () => {
                    try {
                        await navigator.clipboard.writeText(codeElement.textContent);
                        
                        // Change to check icon
                        copyButton.innerHTML = `
                            <svg class="check-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                        `;
                        copyButton.classList.add('copied');
                        
                        // Revert back after 2 seconds
                        setTimeout(() => {
                            copyButton.innerHTML = `
                                <svg class="copy-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                            `;
                            copyButton.classList.remove('copied');
                        }, 2000);
                        
                    } catch (err) {
                        console.error('Failed to copy text: ', err);
                    }
                });
                
                container.appendChild(copyButton);
            });
        }

        // Sidebar functionality
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobile-overlay');
            
            sidebar.classList.toggle('mobile-hidden');
            overlay.classList.toggle('active');
        }

        // Smooth scrolling for sidebar links (only for anchor links)
function setupSmoothScrolling() {
    const sidebarLinks = document.querySelectorAll('.sidebar-link');
    
    sidebarLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            const href = link.getAttribute('href');
            
            // Only handle anchor links (starting with #)
            if (href && href.startsWith('#')) {
                e.preventDefault();
                
                // Remove active class from all links
                sidebarLinks.forEach(l => l.classList.remove('active'));
                
                // Add active class to clicked link
                link.classList.add('active');
                
                // Get target section
                const targetId = href.substring(1);
                const targetSection = document.getElementById(targetId);
                
                if (targetSection) {
                    targetSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
                
                // Close mobile sidebar
                if (window.innerWidth < 768) {
                    toggleSidebar();
                }
            } else {
                // For regular links (to other pages), just close mobile sidebar if open
                if (window.innerWidth < 768) {
                    toggleSidebar();
                }
                // Let the browser handle the navigation normally
            }
        });
    });
}

        // Highlight active section based on scroll position (only for anchor links)
function setupScrollSpy() {
    const sections = document.querySelectorAll('section[id], h1[id], h2[id], h3[id]');
    const sidebarLinks = document.querySelectorAll('.sidebar-link[href^="#"]'); // Only anchor links
    
    function updateActiveLink() {
        let current = '';
        
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            
            if (window.scrollY >= sectionTop - 100) {
                current = section.getAttribute('id');
            }
        });
        
        sidebarLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === `#${current}`) {
                link.classList.add('active');
            }
        });
    }
    
    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink(); // Initial call
}

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Highlight syntax
            Prism.highlightAll();
            
            // Add copy buttons after syntax highlighting
            setTimeout(() => {
                addCopyButtons();
            }, 100);
            
            setupSmoothScrolling();
            setupScrollSpy();
        });

        // Close mobile sidebar when clicking outside
        document.addEventListener('click', (e) => {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobile-overlay');
            
            if (window.innerWidth < 768 && 
                !sidebar.contains(e.target) && 
                !e.target.closest('button[onclick="toggleSidebar()"]') &&
                !sidebar.classList.contains('mobile-hidden')) {
                toggleSidebar();
            }
        });
    </script>
</body>
</html>
